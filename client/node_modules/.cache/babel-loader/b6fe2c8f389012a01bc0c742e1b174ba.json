{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Trevor Pino\\\\Desktop\\\\flippin-finds\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Trevor Pino\\\\Desktop\\\\flippin-finds\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Trevor Pino\\\\Desktop\\\\flippin-finds\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import Jumbotron from\"../components/Jumbotron\";import{useMutation}from'@apollo/react-hooks';import{ADD_ORDER}from\"../utils/mutations.js\";import{idbPromise}from\"../utils/helpers\";function Success(){var _useMutation=useMutation(ADD_ORDER),_useMutation2=_slicedToArray(_useMutation,1),addOrder=_useMutation2[0];useEffect(function(){function saveOrder(){return _saveOrder.apply(this,arguments);}function _saveOrder(){_saveOrder=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var cart,products,_yield$addOrder,data,productData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return idbPromise('cart','get');case 2:cart=_context.sent;products=cart.map(function(item){return item._id;});if(!products.length){_context.next=11;break;}_context.next=7;return addOrder({variables:{products:products}});case 7:_yield$addOrder=_context.sent;data=_yield$addOrder.data;productData=data.addOrder.products;productData.forEach(function(item){idbPromise('cart','delete',item);});case 11:case\"end\":return _context.stop();}}},_callee);}));return _saveOrder.apply(this,arguments);}saveOrder();},[addOrder]);setTimeout(function(){window.location.assign(\"/\");},3000);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Jumbotron,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Success!\"),/*#__PURE__*/React.createElement(\"h2\",null,\"Thank you for your purchase!\"),/*#__PURE__*/React.createElement(\"h2\",null,\"You will now be redirected to the homepage\")));};export default Success;","map":{"version":3,"sources":["C:/Users/Trevor Pino/Desktop/flippin-finds/client/src/pages/Success.js"],"names":["React","useEffect","Jumbotron","useMutation","ADD_ORDER","idbPromise","Success","addOrder","saveOrder","cart","products","map","item","_id","length","variables","data","productData","forEach","setTimeout","window","location","assign"],"mappings":"mhBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,OAASC,WAAT,KAA4B,qBAA5B,CACA,OAASC,SAAT,KAA0B,uBAA1B,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,QAASC,CAAAA,OAAT,EAAmB,kBACIH,WAAW,CAACC,SAAD,CADf,8CACRG,QADQ,kBAGfN,SAAS,CAAC,UAAM,SACDO,CAAAA,SADC,qIAChB,4MACuBH,CAAAA,UAAU,CAAC,MAAD,CAAS,KAAT,CADjC,QACUI,IADV,eAEUC,QAFV,CAEqBD,IAAI,CAACE,GAAL,CAAS,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,GAAT,EAAb,CAFrB,KAIQH,QAAQ,CAACI,MAJjB,gDAK+BP,CAAAA,QAAQ,CAAC,CAAEQ,SAAS,CAAE,CAAEL,QAAQ,CAARA,QAAF,CAAb,CAAD,CALvC,sCAKgBM,IALhB,iBAKgBA,IALhB,CAMcC,WANd,CAM4BD,IAAI,CAACT,QAAL,CAAcG,QAN1C,CAQQO,WAAW,CAACC,OAAZ,CAAoB,SAACN,IAAD,CAAU,CAC5BP,UAAU,CAAC,MAAD,CAAS,QAAT,CAAmBO,IAAnB,CAAV,CACD,CAFD,EARR,uDADgB,4CAgBhBJ,SAAS,GACR,CAjBQ,CAiBN,CAACD,QAAD,CAjBM,CAAT,CAmBAY,UAAU,CAAC,UAAU,CAAEC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,GAAvB,EAA4B,CAAzC,CAA2C,IAA3C,CAAV,CAEA,mBACE,4CACE,oBAAC,SAAD,mBACE,yCADF,cAEE,6DAFF,cAKE,2EALF,CADF,CADF,CAaD,EAEH,cAAehB,CAAAA,OAAf","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport Jumbotron from \"../components/Jumbotron\";\r\nimport { useMutation } from '@apollo/react-hooks';\r\nimport { ADD_ORDER } from \"../utils/mutations.js\";\r\nimport { idbPromise } from \"../utils/helpers\";\r\n\r\nfunction Success() {\r\n    const [addOrder] = useMutation(ADD_ORDER);\r\n\r\n    useEffect(() => {\r\n    async function saveOrder() {\r\n        const cart = await idbPromise('cart', 'get');\r\n        const products = cart.map(item => item._id);\r\n\r\n        if (products.length) {\r\n            const { data } = await addOrder({ variables: { products } });\r\n            const productData = data.addOrder.products;\r\n          \r\n            productData.forEach((item) => {\r\n              idbPromise('cart', 'delete', item);\r\n            });\r\n          }\r\n\r\n    }\r\n\r\n    saveOrder();\r\n    }, [addOrder]);\r\n\r\n    setTimeout(function(){ window.location.assign(\"/\")}, 3000);\r\n\r\n    return (\r\n      <div>\r\n        <Jumbotron>\r\n          <h1>Success!</h1>\r\n          <h2>\r\n            Thank you for your purchase!\r\n          </h2>\r\n          <h2>\r\n            You will now be redirected to the homepage\r\n          </h2>\r\n        </Jumbotron>\r\n      </div>\r\n    );\r\n  };\r\n\r\nexport default Success;"]},"metadata":{},"sourceType":"module"}